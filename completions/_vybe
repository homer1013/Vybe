#compdef vybe
# zsh completion for vybe
local -a commands
commands=(
  "run:Run command and capture output"
  "r:Alias for run"
  "retry:Re-run the last vybe run command"
  "rr:Alias for retry"
  "last:Print most recent capture"
  "l:Alias for last"
  "snip:Print output only (strip header)"
  "s:Alias for snip"
  "snipclip:Copy output only to clipboard"
  "sc:Alias for snipclip"
  "tail:Tail most recent capture"
  "open:Open most recent capture in pager"
  "o:Alias for open"
  "ls:List captures"
  "ll:Alias for ls"
  "grep:Grep most recent capture"
  "md:Wrap capture in Markdown fences"
  "clip:Copy most recent capture to clipboard"
  "fail:Select most recent failing run"
  "errors:Extract likely error blocks from latest capture"
  "export:Export latest capture in JSON for agents"
  "diff:Diff latest capture against the previous capture"
  "share:Build Markdown share bundle from latest capture"
  "doctor:Print environment and tool diagnostics"
  "cfg:Print current config and paths"
  "init:Initialize vybe config defaults"
  "completion:Install shell completion files"
  "tags:List known capture tags"
  "pane:Capture tmux pane scrollback"
  "version:Print version"
  "help:Show help"
)
_arguments -C   '1:command:->cmds'   '*::arg:->args'

case $state in
  cmds)
    _describe -t commands 'vybe commands' commands
  ;;
  args)
    # basic completion: nothing fancy yet
  ;;
esac
